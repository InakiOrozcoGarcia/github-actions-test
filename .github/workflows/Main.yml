name: report SDL

on:
  workflow_call:
    inputs:
      project:
        required: true
        type: string
      SDLe_id:
        required: true
        type: string
  workflow_dispatch:
  push:

jobs:
  print-info:
    runs-on: ubuntu-latest

    steps:
      - name: Print the input project and SDLe id to STDOUT
        run: |
          echo The project is ${{ inputs.project }}
          echo The SDLE id is ${{ inputs.SDLe_id }}

  build:
    runs-on: ubuntu-latest
    steps:
      - name: Build the runner
        run: echo Building

  test:
    needs: build
    runs-on: ubuntu-latest
    steps: 
      - name: Test the project SDL
        run: echo testing

  scan:
    needs: build
    runs-on: ubuntu-latest
    steps: 
      - name: Scan the project SDL code
        run: echo scanning

  verify-tests:
    needs: test
    runs-on: ubuntu-latest
    steps: 
      - name: verify test results
        run: echo verifying tests

  verify-scans:
    needs: scan
    runs-on: ubuntu-latest
    steps: 
      - name: verify the scans of code
        run: echo verifying scans

  upload-SDL-report:
    if: ${{ always() }}
    needs: [verify-tests, verify-scans]
    runs-on: ubuntu-latest
    steps: 
      - name: Upload the evidence to the project SDL
        run: echo uploading SDL